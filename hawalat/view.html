<?php
$articles = [
    [
        'title' => 'â– Ø£Ø¹Ø±Ø§Ø¶ ÙÙ‡Ù… Ø§Ù„Ø¯ÙŠÙ† Ø¨Ø§Ù„Ù…Ù‚Ù„ÙˆØ¨',
        'content' => '1- ØªØ¤Ù…Ù† Ø¨Ø£Ù† Ø§Ù„ÙƒÙ„Ø¨ Ù†Ø¬Ø³...', // Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒØ§Ù…Ù„
        'date' => '2023-12-25'
    ],
    [
        'title' => 'â– Ø§Ù„Ø¨Ø§Ø­Ø« Ø¹Ù† Ø§Ù„Ø£Ø¶ÙˆØ§Ø¡',
        'content' => 'ÙÙŠ Ø³Ø§Ø­Ø© Ø§Ù„ÙÙƒØ± ÙˆØ§Ù„ØªØ¯Ø¨Ø±...',
        'date' => '2024-01-10'
    ],
    [
        'title' => 'â– Ø´ØªÙŠÙ…Ø© Ø£Ù‡Ù„ Ø§Ù„Ù†Ù‚Ù„ Ø´Ù‡Ø§Ø¯Ø© Ù„Ø£Ù‡Ù„ Ø§Ù„Ø¹Ù‚Ù„',
        'content' => 'ÙÙŠ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹Ø§Øª Ø§Ù„ØªÙŠ ØªÙ‚Ø¯Ù‘Ø³...',
        'date' => '2024-01-15'
    ],
    [
        'title' => 'â– Ù‡ÙˆØ§Ù…Ø´ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø±ÙŠÙ‚',
        'content' => 'Ù‡Ù†Ø§Ùƒ Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ø£Ø´Ø®Ø§Øµ...',
        'date' => '2024-02-01'
    ],
    [
        'title' => 'â– ÙˆÙ‡Ù… Ø§Ù„Ø­ÙˆØ§Ø³ ÙÙŠ Ø§Ù„Ø¥Ù„Ø­Ø§Ø¯ØŒ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ø£ÙˆØ³Ø¹ Ù…Ù…Ø§ ÙŠÙØ±Ù‰.',
        'content' => 'ÙƒØ«ÙŠØ±ÙˆÙ† Ù…Ù…Ù† ÙŠÙ†ÙƒØ±ÙˆÙ†...',
        'date' => '2024-02-10'
    ],
    [
        'title' => 'â– Ø¯Ø¹Ù‡Ù… ÙŠØªÙƒÙ„Ù…ÙˆÙ†ØŒ ÙˆÙˆØ§ØµÙ„ Ø·Ø±ÙŠÙ‚Ùƒ Ø¨Ø³Ù„Ø§Ù….',
        'content' => 'ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø­ÙŠØ§Ø©...',
        'date' => '2024-03-05'
    ],
    [
        'title' => 'â– Ø§Ø²Ø¯ÙˆØ§Ø¬ÙŠØ© Ø§Ù„Ø¶Ù…ÙŠØ±',
        'content' => 'ÙÙŠ Ø¹Ø§Ù„Ù… ÙŠØ²Ø¹Ù…...',
        'date' => '2024-03-15'
    ],
    [
        'title' => 'â– Ø§Ù„Ø¬Ø¯Ø§Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¤Ø¯Ù„Ø¬ÙŠÙ†ØŒ Ù…Ø¹Ø±ÙƒØ© Ø®Ø§Ø³Ø±Ø©.',
        'content' => 'ÙƒÙ… Ù…Ø±Ø© ÙˆØ¬Ø¯Øª...',
        'date' => '2024-04-01'
    ],
    [
        'title' => 'â– Ù„Ø§ ØªØ³Ø¹Ù Ù„Ø¥Ø±Ø¶Ø§Ø¡ Ø£Ø­Ø¯.',
        'content' => 'Ù…Ù†Ø° Ø§Ù„Ø£Ø²Ù„...',
        'date' => '2024-04-10'
    ],
    [
        'title' => 'â– Ù…Ù…Ø§ Ù‚Ø±Ø£Øª ÙˆØ£Ø¹Ø¬Ø¨Ù†ÙŠ ÙÙŠ Ù…Ø³Ø£Ù„Ø© Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø§Ø®ØªÙ„Ø§Ù ÙˆØ§Ù„ØªØ¹Ø§ÙŠØ´ Ø¨ÙŠÙ† Ø§Ù„Ø¨Ø´Ø±',
        'content' => '1- Ø£Ù†Ø§ Ù„Ø³ØªÙ Ø£Ù†Øª...',
        'date' => '2024-05-01'
    ],
    [
        'title' => 'â– Ø§Ù„Ø­Ù‚ Ù„Ø§ ÙŠØ®Ø´Ù Ø´ÙŠØ¡',
        'content' => 'Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø­Ù‚ ÙŠØ®Ø´Ù‰...',
        'date' => '2024-05-05'
    ],
    [
        'title' => 'â– ØªØ¨Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ù‡Ù„',
        'content' => 'Ù„Ù… Ø£Ø±Ù ØªØ­Ù‚ÙŠØ±Ù‹Ø§...',
        'date' => '2024-05-10'
    ]
];

// ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª ØªÙ†Ø§Ø²Ù„ÙŠØ§Ù‹ Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ® (Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹)
usort($articles, function($a, $b) {
    return strtotime($b['date']) - strtotime($a['date']);
});

function arabicDate($date) {
    $months = [
        'January' => 'ÙŠÙ†Ø§ÙŠØ±', 'February' => 'ÙØ¨Ø±Ø§ÙŠØ±', 'March' => 'Ù…Ø§Ø±Ø³',
        'April' => 'Ø£Ø¨Ø±ÙŠÙ„', 'May' => 'Ù…Ø§ÙŠÙˆ', 'June' => 'ÙŠÙˆÙ†ÙŠÙˆ',
        'July' => 'ÙŠÙˆÙ„ÙŠÙˆ', 'August' => 'Ø£ØºØ³Ø·Ø³', 'September' => 'Ø³Ø¨ØªÙ…Ø¨Ø±',
        'October' => 'Ø£ÙƒØªÙˆØ¨Ø±', 'November' => 'Ù†ÙˆÙÙ…Ø¨Ø±', 'December' => 'Ø¯ÙŠØ³Ù…Ø¨Ø±'
    ];
    
    $date = new DateTime($date);
    return $date->format('j') . ' ' . $months[$date->format('F')] . ' ' . $date->format('Y');
}
?>

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ù…Ù‚Ø§Ù„Ø§Øª - Ø­Ø³ÙŠÙ† Ø§Ù„Ø®Ù„ÙŠÙ„</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f5efff;
      margin: 0;
      padding: 0;
      color: #2f003f;
    }

    nav {
      background-color: #5e2ca5;
      padding: 1em;
      text-align: center;
      position: relative;
      z-index: 1;
    }

    nav a {
      color: white;
      text-decoration: none;
      margin: 0 1em;
      font-weight: bold;
      font-size: 1em;
    }

    nav a:hover {
      text-decoration: underline;
    }

    .container {
      padding: 2em;
      max-width: 900px;
      margin: auto;
      text-align: center;
    }

    h1 {
      color: #5e2ca5;
      margin-bottom: 0.5em;
    }

    p.intro {
      font-size: 1.1em;
      margin-bottom: 2em;
      color: #4a208f;
    }

    .article {
      background-color: #ebddff;
      padding: 1.5em;
      border-radius: 10px;
      margin-bottom: 1.5em;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      text-align: right;
      position: relative;
    }

    .date-sticker {
      background: #7b3fcf;
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      display: inline-block;
      margin-bottom: 15px;
      font-size: 0.9em;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .article h2 {
      color: #4a208f;
      margin-top: 0;
    }

    .article p {
      line-height: 1.8;
      white-space: pre-line;
      overflow: hidden;
      max-height: 4.5em;
      transition: max-height 0.4s ease;
    }

    .article.expanded p {
      max-height: 1000px;
    }

    .article a.read-more {
      display: inline-block;
      margin-top: 10px;
      color: #6a0dad;
      font-weight: bold;
      text-decoration: none;
      cursor: pointer;
      transition: transform 0.2s ease, color 0.2s ease;
    }

    .article a.read-more:hover {
      color: #4b0082;
      transform: scale(1.05);
    }

    .favorite-button {
      background-color: #b08cf2;
      color: white;
      padding: 8px 20px;
      border: 2px solid #dcc7fc;
      border-radius: 8px;
      margin-top: 10px;
      cursor: pointer;
      font-size: 14px;
      position: relative;
      transition: transform 0.2s ease;
    }

    .favorite-button.active {
      background-color: #4b0082;
      border-color: #4b0082;
    }

    .favorite-button:hover {
      transform: scale(1.07);
    }

    @media (hover: hover) and (pointer: fine) {
      .favorite-button:hover::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: 125%;
        right: 50%;
        transform: translateX(50%);
        background-color: #7b3fcf;
        color: #e8d7ff;
        padding: 6px 10px;
        border-radius: 6px;
        font-size: 0.85em;
        white-space: nowrap;
        opacity: 1;
        pointer-events: none;
        z-index: 10;
      }
    }

    #message {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #7b3fcf;
      color: white;
      padding: 12px 20px;
      border-radius: 10px;
      font-size: 15px;
      display: none;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      max-width: 90%;
      text-align: center;
      white-space: nowrap;
    }
  </style>
</head>
<body>

  <nav>
    <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="books.html">Ø§Ù„ÙƒØªØ¨</a>
    <a href="khawatir.html">Ø®ÙˆØ§Ø·Ø±</a>
    <a href="videos.html">Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</a>
    <a href="ask.html">Ø§Ø·Ø±Ø­ Ø³Ø¤Ø§Ù„Ùƒ</a>
    <a href="hewar.html">Ø­ÙˆØ§Ø±Ø§Øª</a>
    <a href="favorites.html">Ø§Ù„Ù…ÙØ¶Ù„Ø©</a>
    <a href="support.html">Ø§Ø¯Ø¹Ù…Ù†ÙŠ</a>
    <a href="about.html">Ø¹Ù†ÙŠ</a>
  </nav>

  <div class="container">
    <h1>Ù…Ù‚Ø§Ù„Ø§Øª</h1>
    <p class="intro">ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ø£Ø´Ø§Ø±Ùƒ ØªØ£Ù…Ù„Ø§ØªÙŠ ÙˆÙƒØªØ§Ø¨Ø§ØªÙŠ ÙÙŠ Ø§Ù„ØªÙ†ÙˆÙŠØ±ØŒ ÙˆÙ‚Ø±Ø§Ø¡Ø© Ù…Ø¹Ø§ØµØ±Ø© Ù„Ù„Ù†ØµØŒ ÙˆÙ†Ù‚Ø¯ Ø§Ù„Ù…ÙˆØ±ÙˆØ« Ø¨ÙˆØ¹ÙŠ ÙˆØ§Ø­ØªØ±Ø§Ù… Ù„Ù„Ø¹Ù‚Ù„.</p>

    <?php foreach ($articles as $article): ?>
    <div class="article">
      <div class="date-sticker">
        ğŸ“… <?php echo arabicDate($article['date']); ?>
      </div>
      <h2><?php echo $article['title']; ?></h2>
      <p><?php echo nl2br($article['content']); ?></p>
      <a class="read-more" onclick="toggleArticle(this)">Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø²ÙŠØ¯</a><br>
      <button class="favorite-button" onclick="toggleFavorite(this, '<?php echo $article['title']; ?>')">â­</button>
      <button class="favorite-button print-button" onclick="printArticle(this)" data-tooltip="Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù…Ù‚Ø§Ù„Ø©">ğŸ–¨ï¸</button>
    </div>
    <?php endforeach; ?>

  </div>

  <div id="message"></div>

  <script>
    function toggleArticle(link) {
      const article = link.closest('.article');
      article.classList.toggle('expanded');
      link.textContent = article.classList.contains('expanded') ? 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Øµ' : 'Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø²ÙŠØ¯';
    }

    function toggleFavorite(button, item) {
      let favorites = JSON.parse(localStorage.getItem("favorites")) || [];
      const messageBox = document.getElementById("message");

      const isFavorite = favorites.includes(item);
      if (isFavorite) {
        favorites = favorites.filter(i => i !== item);
        showMessage("ØªÙ…Øª Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¹Ù†ØµØ± Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©");
        button.classList.remove("active");
        button.setAttribute("data-tooltip", "Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©");
      } else {
        favorites.push(item);
        showMessage("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†ØµØ± Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©");
        button.classList.add("active");
        button.setAttribute("data-tooltip", "ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©");
      }

      localStorage.setItem("favorites", JSON.stringify(favorites));
    }

    function printArticle(button) {
      const article = button.closest(".article").cloneNode(true);
      const printWindow = window.open('', '', 'width=800,height=600');
      printWindow.document.write(`
        <html>
          <head>
            <title>Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù…Ù‚Ø§Ù„Ø©</title>
            <style>
              body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #2f003f; padding: 2em; direction: rtl; }
              h2 { color: #4a208f; }
              p { line-height: 1.8; white-space: pre-line; }
              .read-more, .favorite-button, .print-button { display: none !important; }
              .date-sticker { background: #7b3fcf; color: white; padding: 6px 12px; border-radius: 20px; }
            </style>
          </head>
          <body>${article.innerHTML}</body>
        </html>
      `);
      printWindow.document.close();
    }

    function showMessage(text) {
      const message = document.getElementById("message");
      message.textContent = text;
      message.style.display = "block";
      setTimeout(() => message.style.display = "none", 2000);
    }

    window.onload = function() {
      const favorites = JSON.parse(localStorage.getItem("favorites")) || [];
      document.querySelectorAll(".favorite-button").forEach(button => {
        const item = button.getAttribute("onclick").split("'")[1];
        button.classList.toggle("active", favorites.includes(item));
        button.setAttribute("data-tooltip", favorites.includes(item) 
          ? "ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©" 
          : "Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©");
      });

      document.querySelectorAll(".article").forEach(article => {
        const p = article.querySelector("p");
        const readMore = article.querySelector(".read-more");
        if (p.scrollHeight <= parseFloat(getComputedStyle(p).lineHeight) * 3) {
          readMore.style.display = "none";
        }
      });
    };
  </script>

</body>
</html>
