<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Podcast - Hussein Al-Khalil</title>
    <!-- AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4459876088599546" crossorigin="anonymous"></script>
    <!-- Favicon -->
    <link href="/images/logo-small.png" rel="icon" type="image/png"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Shared Variables & Styles */
        :root {
            --primary-color: #5e2ca5;
            --primary-dark: #451b7a;
            --primary-light: #8a5bc7;
            --accent-color: #ffd700;
            --bg-color: #f9f7f2;
            --surface-color: #F8F5FD; 
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --shadow-sm: 0 4px 15px rgba(94, 44, 165, 0.08);
            --shadow-md: 0 8px 20px rgba(94, 44, 165, 0.12);
            --shadow-lg: 0 15px 30px rgba(0,0,0,0.1);
            --radius-lg: 1rem;
            --radius-xl: 1.5rem;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--bg-color); color: var(--text-primary); line-height: 1.6; overflow-x: hidden; display: flex; flex-direction: column; min-height: 100vh; }
        body.no-scroll { overflow: hidden !important; height: 100vh; }
        a { text-decoration: none; color: inherit; transition: all 0.3s ease; }

        /* ==================== Navigation ==================== */
        .nav-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); z-index: 998; display: none; }
        nav { background: rgba(94, 44, 165, 0.95); backdrop-filter: blur(10px); padding: 0.8rem 2%; position: fixed; width: 100%; top: 0; z-index: 1000; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .logo-container img { height: 40px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2)); }
        .nav-links { display: flex; flex: 1; justify-content: space-evenly; align-items: center; flex-wrap: wrap; margin: 0 20px; order: 2; }
        .nav-links a { color: white; font-weight: 700; font-size: 0.9rem; padding: 8px 12px; border-radius: 20px; display: flex; align-items: center; gap: 5px; white-space: nowrap; }
        .nav-links a:hover { background: rgba(255,255,255,0.15); transform: translateY(-2px); }
        .hamburger { display: none; color: white; font-size: 1.5rem; cursor: pointer; order: 3; }

        @media (max-width: 1200px) {
            .hamburger { display: block; order: 1; }
            .logo-container { order: 2; }
            .nav-links { position: fixed; top: 60px; left: -280px; width: 280px; background: var(--surface-color); flex-direction: column; padding: 20px; height: calc(100vh - 60px); box-shadow: 5px 0 15px rgba(0,0,0,0.1); transition: left 0.3s ease; overflow-y: auto; flex-wrap: nowrap; justify-content: flex-start; gap: 10px; margin: 0; flex: unset; z-index: 1000; }
            .nav-links.show { left: 0; }
            .nav-links a { color: var(--text-primary); width: 100%; padding: 12px; border-radius: 8px; font-size: 1rem; justify-content: flex-start; border-bottom: 1px solid rgba(0,0,0,0.03); }
            nav { padding: 0.8rem 5%; }
        }

        /* Hero & Search */
        .hero-section { background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%); padding: 120px 20px 140px; text-align: center; color: white; border-radius: 0 0 50px 50px; position: relative; z-index: 1; }
        .hero-content { max-width: 900px; margin: 0 auto; display: flex; flex-direction: column; align-items: center; gap: 20px; }
        .hero-text h1 { font-size: 2.5rem; margin-bottom: 10px; font-weight: 800; }
        
        .universal-search { width: 100%; max-width: 600px; position: relative; margin: 0 auto 40px; z-index: 100; }
        #globalSearch { width: 100%; padding: 18px 25px 18px 50px; border-radius: 50px; border: none; font-size: 1rem; box-shadow: 0 10px 30px rgba(0,0,0,0.15); font-family: 'Tajawal', sans-serif; outline: none; background: white; transition: box-shadow 0.3s ease; text-align: left; }
        .search-icon-placeholder { position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: var(--primary-color); pointer-events: none; }
        .search-results { position: absolute; top: 115%; left: 0; right: 0; background: white; border-radius: 15px; box-shadow: 0 15px 40px rgba(0,0,0,0.2); max-height: 400px; overflow-y: auto; display: none; text-align: left; border: 1px solid rgba(0,0,0,0.05); z-index: 10000; }
        .search-count { padding: 10px 20px; font-size: 0.9rem; color: var(--primary-color); border-bottom: 2px solid rgba(94, 44, 165, 0.1); background: #f8fafc; font-weight: 700; }
        .search-item { padding: 15px 20px; border-bottom: 1px solid rgba(0,0,0,0.05); cursor: pointer; }
        mark { background: var(--accent-color); color: #422006; padding: 0 3px; border-radius: 3px; }

        /* Main Content */
        .container { max-width: 1350px; margin: 0 auto; padding: 0 20px; }
        .main-wrapper { position: relative; z-index: 20; margin-top: -90px; margin-bottom: 60px; }

        /* Podcast Player */
        .podcast-player { background: linear-gradient(145deg, #ffffff, #f8f5ff); border-radius: 20px; padding: 25px; margin: 0 auto 40px; box-shadow: var(--shadow-md); max-width: 800px; border-left: 6px solid var(--primary-color); position: relative; z-index: 10; text-align: center; }
        .player-controls { display: flex; align-items: center; justify-content: center; gap: 20px; margin: 15px 0; }
        .control-btn { background: white; color: var(--primary-color); border: 2px solid var(--primary-color); border-radius: 50%; width: 45px; height: 45px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; }
        .control-btn.main-play { width: 55px; height: 55px; background: var(--primary-color); color: white; font-size: 1.5rem; }
        .progress-container { width: 100%; height: 6px; background: #e2e8f0; border-radius: 4px; cursor: pointer; direction: ltr; position: relative; }
        .progress-bar { height: 100%; background: var(--primary-color); width: 0%; border-radius: 4px; }
        .volume-controls { display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 15px; }
        .volume-slider { width: 100px; height: 6px; background: #e2e8f0; border-radius: 3px; outline: none; cursor: pointer; }

        /* Podcasts Grid - Scalable */
        .podcasts-grid { 
            display: grid; 
            grid-template-columns: repeat(6, 1fr); 
            gap: 15px; 
            width: 100%;
            align-items: start;
        }

        .podcast-card { 
            background: var(--surface-color); border-radius: 12px; padding: 10px; 
            box-shadow: var(--shadow-sm); transition: 0.4s; display: flex; flex-direction: column; 
            border: 1px solid rgba(0,0,0,0.03); width: 100%;
        }
        .podcast-card.active-podcast { border: 2px solid var(--primary-color); background: #fcfaff; }
        .podcast-card img { width: 100%; height: 140px; object-fit: cover; border-radius: 8px; margin-bottom: 10px; }
        .podcast-card h2 { font-size: 0.9rem; font-weight: 700; text-align: center; margin-bottom: 10px; flex-grow: 1; line-height: 1.3; min-height: 2.6rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        .listen-link { 
            background: white; color: var(--primary-color); border: 1px solid var(--primary-color); 
            padding: 6px 12px; border-radius: 20px; text-align: center; font-weight: 700; 
            font-size: 0.8rem; display: flex; align-items: center; justify-content: center; gap: 5px; 
        }
        .podcast-actions { display: flex; justify-content: center; gap: 8px; margin-top: 10px; border-top: 1px solid #eee; padding-top: 10px; }
        .favorite-btn { width: 35px; height: 35px; border-radius: 50%; border: 1px solid #e2e8f0; background: none; cursor: pointer; transition: 0.3s; color: var(--text-secondary); display: flex; align-items: center; justify-content: center; }
        .favorite-btn.active { background: var(--accent-color); color: #422006; border-color: var(--accent-color); }

        /* Pagination Section */
        .pagination-section {
            display: flex; flex-direction: column; align-items: center; gap: 15px;
            margin: 50px 0; padding: 25px; background: white; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm);
        }
        .pagination-controls { display: flex; align-items: center; gap: 10px; }
        .page-arrow {
            padding: 8px 18px; border-radius: 25px; border: 2px solid var(--primary-color);
            background: white; color: var(--primary-color); font-weight: 700;
            cursor: pointer; display: flex; align-items: center; gap: 8px; transition: 0.3s;
        }
        .page-arrow:hover:not(:disabled) { background: var(--primary-color); color: white; }
        .page-arrow:disabled { opacity: 0.4; cursor: not-allowed; border-color: #cbd5e1; color: #64748b; }
        .video-counter { font-weight: 700; color: var(--text-secondary); font-size: 0.95rem; }

        /* Footer Effects */
        footer { background: var(--primary-dark); color: white; padding: 40px 20px; text-align: center; margin-top: auto; }
        .footer-links { display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; flex-wrap: wrap; }
        .footer-links a { color: rgba(255,255,255,0.8); font-size: 0.9rem; transition: 0.3s; }
        .footer-links a:hover { color: var(--accent-color); }
        .copyright { color: rgba(255,255,255,0.6); font-size: 0.85rem; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px; margin-top: 20px; }

        /* Social */
        .social-section { text-align: center; margin-bottom: 60px; background: var(--surface-color); padding: 40px; border-radius: var(--radius-xl); box-shadow: var(--shadow-sm); max-width: 1200px; margin-left: auto; margin-right: auto;}
        .section-title { text-align: center; margin-bottom: 40px; position: relative; }
        .section-title h2 { color: var(--primary-color); font-size: 2rem; display: inline-block; padding-bottom: 15px; }
        .section-title h2::after { content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 60px; height: 4px; background: var(--accent-color); border-radius: 2px; }
        .social-grid { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 30px; }
        .social-btn { width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.05); transition: 0.3s; }
        .social-btn img { width: 24px; height: 24px; }
        .social-btn:hover { transform: translateY(-5px) scale(1.1); }
        .social-btn:hover img { filter: brightness(0) invert(1); }
        .social-btn.facebook:hover { background: #1877F2; }
        .social-btn.instagram:hover { background: #E4405F; }
        .social-btn.youtube:hover { background: #FF0000; }

        .back-to-top { position: fixed; bottom: 30px; right: 30px; width: 50px; height: 50px; background: var(--primary-color); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; opacity: 0; transition: 0.3s; z-index: 995; }
        .back-to-top.visible { opacity: 1; }
        #message { position: fixed; top: 50%; left: 50%; transform: translate(-50%,-50%); background: var(--primary-color); color: white; padding: 15px 30px; border-radius: 10px; display: none; z-index: 2000; }

        /* Responsive Breakpoints */
        @media (max-width: 1550px) { .podcasts-grid { grid-template-columns: repeat(5, 1fr); } }
        @media (max-width: 1300px) { .podcasts-grid { grid-template-columns: repeat(4, 1fr); } }
        @media (max-width: 992px) { .podcasts-grid { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 768px) { .podcasts-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 900px) { .hero-text h1 { font-size: 2rem; } .hero-section { padding: 100px 20px 160px; } }
        @media (max-width: 480px) { .podcasts-grid { grid-template-columns: 1fr; } .pagination-controls { flex-wrap: wrap; justify-content: center; } }
    </style>
</head>
<body>

    <div class="nav-overlay" onclick="toggleMobileMenu()"></div>

    <nav>
        <div class="logo-container">
            <a href="index.html"><img src="/images/logo.png" alt="Hussein Al-Khalil Logo" /></a>
        </div>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="books.html">Books</a>
            <a href="articles.html">Articles</a>
            <a href="hadith.html">Hadiths</a>
            <a href="khawatir.html">Thoughts</a>
            <a href="videos.html">Videos</a>
            <a href="history.html">History</a>
            <a href="podcast.html" style="background: rgba(255,255,255,0.2);">Podcast</a>
            <a href="ask.html">Ask</a>
            <a href="hewar.html">Dialogues</a>
            <a href="inq.html">Inquiries</a>
            <a href="manhaj.html">Methodology</a>
            <a href="favorites.html">Favorites</a>
            <a href="support.html">Support</a>
            <a href="about.html">About Us</a>
            <a href="/podcast.html" style="color: #ffd700 !important; font-weight: 800; font-size: 1rem; border: 1.5px solid rgba(255, 215, 0, 0.6); padding: 8px 16px; border-radius: 20px;">Ar<i class="fas fa-globe"></i></a>
        </div>
        <div class="hamburger" onclick="toggleMobileMenu()"><i class="fas fa-bars"></i></div>
    </nav>

    <header class="hero-section">
        <div class="hero-content">
            <div class="hero-text">
                <h1>Podcast</h1>
                <p>Listen to "Think Again" podcast episodes discussing contemporary intellectual topics</p>
            </div>
        </div>
    </header>

    <div class="container main-wrapper">
        <div class="universal-search">
            <i class="fas fa-search search-icon-placeholder"></i>
            <input type="text" id="globalSearch" placeholder="Search all content..." />
            <div class="search-results" id="searchResults"></div>
        </div>

        <div class="podcast-player">
            <div class="episode-title" id="current-title" style="text-align: center; font-weight: 800; color: var(--primary-dark); margin-bottom: 10px;">Choose an episode to listen</div>
            <div class="player-controls">
                <button class="control-btn" onclick="skipBackward()"><i class="fas fa-undo"></i></button>
                <button class="control-btn main-play" onclick="togglePlay()" id="playBtn"><i class="fas fa-play"></i></button>
                <button class="control-btn" onclick="skipForward()"><i class="fas fa-redo"></i></button>
            </div>
            <div class="progress-container" onclick="setProgress(event)">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; direction: ltr; margin-top: 5px; color: var(--text-secondary);">
                <span id="currentTime">0:00</span>
                <span id="duration">0:00</span>
            </div>
            <div class="volume-controls">
                <i class="fas fa-volume-down" style="color: var(--text-secondary);"></i>
                <input type="range" min="0" max="100" value="80" class="volume-slider" id="volumeSlider" oninput="updateVolume(event)">
                <i class="fas fa-volume-up" style="color: var(--text-secondary);"></i>
            </div>
        </div>

        <!-- Podcasts Grid -->
        <div class="podcasts-grid" id="podcastsGrid"></div>

        <!-- Pagination Section -->
        <div class="pagination-section">
            <div class="pagination-controls">
                <button class="page-arrow" id="firstPage" onclick="goToPage(1)"><i class="fas fa-angle-double-left"></i> First</button>
                <button class="page-arrow" id="prevPage" onclick="changePage(-1)"><i class="fas fa-chevron-left"></i> Prev</button>
                <span class="video-counter" id="pageIndicator">Page 1 of 1</span>
                <button class="page-arrow" id="nextPage" onclick="changePage(1)">Next <i class="fas fa-chevron-right"></i></button>
                <button class="page-arrow" id="lastPage" onclick="goToLastPage()">Last <i class="fas fa-angle-double-right"></i></button>
            </div>
            <div class="video-counter" id="totalCounter">Showing 0 of 0 episodes</div>
        </div>

        <div class="social-section">
            <div class="section-title"><h2>Follow Me</h2></div>
            <div class="social-grid">
                <a href="https://youtube.com/@husseinalkhalil" target="_blank" class="social-btn youtube"><img src="icons/yot-soc.png" alt="YouTube"></a>
                <a href="https://www.facebook.com/hussien.alkhalil" target="_blank" class="social-btn facebook"><img src="icons/fac-soc.png" alt="Facebook"></a>
                <a href="https://instagram.com/husseinalkhalil" target="_blank" class="social-btn instagram"><img src="icons/ins-soc.png" alt="Instagram"></a>
                <a href="https://t.me/tanoeer" target="_blank" class="social-btn telegram"><img src="icons/tel-soc.png" alt="Telegram"></a>
                <a href="https://tiktok.com/@h.alkhalil" target="_blank" class="social-btn tiktok"><img src="icons/tik-soc.png" alt="TikTok"></a>
                <a href="https://snapchat.com/t/sFLWjw3K" target="_blank" class="social-btn snap"><img src="icons/snap.png" alt="Snapchat"></a>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-links">
                <a href="/terms.html">Terms & Conditions</a>
                <a href="/privacy.html">Privacy Policy</a>
                <a href="/contact.html">Contact Us</a>
                <a href="/feedback.html">Feedback</a>
            </div>
            <div class="copyright">Hussein Al-Khalil - All Rights Reserved Â© 2025</div>
        </div>
    </footer>

    <div class="back-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})"><i class="fas fa-arrow-up"></i></div>
    <div id="message"></div>

    <script>
        const podcastList = [
            {id: "59", title: "Western Conspiracy and Al-Bukhari's Fabrications", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2026-0-30/417136327-44100-2-f0cc5df887dad.m4a"},
            {id: "58", title: "Circumcision: Custom or Worship?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2025-11-27/415058466-44100-2-8470ea4118846.m4a"},
            {id: "57", title: "Prayer: The Muslim's Bugbear", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2025-11-27/415058508-44100-2-22a418a2f2a7c.m4a"},
            {id: "56", title: "Is Prayer Mandatory for Muslims?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2025-6-24/404459013-44100-2-2fe8fe2931b35.m4a"},
            {id: "55", title: "Did God Create Injustice?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2025-6-12/403797674-44100-2-f53f8ef599752.m4a"},
            {id: "54", title: "Prayer as God Intended It", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2025-6-9/403624728-44100-2-821a645b1d4e1.m4a"},
            {id: "53", title: "Exposed Candy Theory", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-3-29/375941594-44100-2-fb93811371068.m4a"},
            {id: "52", title: "The Fate of Hindus and Buddhists", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-3-29/375941252-44100-2-92ba1fdab4323.m4a"},
            {id: "51", title: "Why is Traditional Heritage Morality Poor?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-3-16/374554834-44100-2-a7fc3525b18a1.m4a"},
            {id: "50", title: "Did God Mention the Number of Rak'ahs?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-3-12/374097843-44100-2-45524aa7b6248.m4a"},
            {id: "49", title: "The Seven Qira'at of the Quran", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-2-12/370685968-44100-2-d9b6b161a46e4.m4a"},
            {id: "48", title: "Fate and Predestination", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-2-12/370685523-44100-2-e01b42113f1b9.m4a"},
            {id: "47", title: "Guidance and Divine Will", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-2-12/370685270-44100-2-94c25034d70e2.m4a"},
            {id: "46", title: "The Four Schools and their Differences", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-2-12/370684968-44100-2-b901852b42c08.m4a"},
            {id: "45", title: "Good Deeds", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-2-12/370684630-44100-2-06b5554303a56.m4a"},
            {id: "44", title: "Are we bound by Occasions of Revelation?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-1-13/367353738-44100-2-e0b57d1bf8bac.m4a"},
            {id: "43", title: "Are the Torah and Bible Corrupted?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-1-13/367353241-44100-2-d54c624af8817.m4a"},
            {id: "42", title: "Is Bukhari's Book a Jewish Creation?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2025-0-11/392914886-44100-2-33b38030cf50e.m4a"},
            {id: "41", title: "Is Consensus a Source of Legislation?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-1-13/367352174-44100-2-f941b665764d6.m4a"},
            {id: "40", title: "Who is a Muslim?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-1-13/367351847-44100-2-695ef843a517b.m4a"},
            {id: "38", title: "Cutting the Thief's Hand: Truth vs Illusion", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-1-13/367350787-44100-2-bb1a65c4ae514.m4a"},
            {id: "37", title: "Ask the People of Remembrance", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-1-13/367350412-44100-2-12494d6db0695.m4a"},
            {id: "36", title: "Sahih al-Bukhari", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-1-13/367349906-44100-2-2ee0f74fd7ceb.m4a"},
            {id: "35", title: "The Straight Path: Truth vs Illusion", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-1-13/367346960-44100-2-ad4ae7943a43c.m4a"},
            {id: "34", title: "Stoning: Truth vs Illusion", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-1-13/367346531-44100-2-fa5f197715506.m4a"},
            {id: "33", title: "Praying for Non-Muslims", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-1-13/367346217-44100-2-d26dce76a0f45.m4a"},
            {id: "32", title: "Adoption in Islam", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2024-1-13/367346037-44100-2-c2b4a165fa3c1.m4a"},
            {id: "31", title: "Is Traditional Prayer Ta'qifi?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-10-27/357416853-44100-2-1cd9688646b46.m4a"},
            {id: "30", title: "Two, Three, and Four", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-10-21/356623843-44100-2-4b164060e77da.m4a"},
            {id: "29", title: "Backbiting and Spying", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-10-21/356623843-44100-2-4b164060e77da.m4a"},
            {id: "28", title: "Signs of the Hour: Truth vs Illusion", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-10-1/353718794-44100-2-ebe4bd57c05a6.m4a"},
            {id: "27", title: "Homosexuality", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-10-1/353718437-44100-2-6e57b7fc89c69.m4a"},
            {id: "26", title: "Divorce from the Book of God", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-9-11/350697775-44100-2-3010dec3a7cde.m4a"},
            {id: "25", title: "Hijab: Custom or Worship?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-9-5/349902772-44100-2-edfb5dc8e42a3.m4a"},
            {id: "24", title: "I will Deny Everything but the Quran", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-9-5/349902213-44100-2-76b4451f43f95.m4a"},
            {id: "23", title: "The Concept of Janabah", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-23/348198363-44100-2-558bc3296546.m4a"},
            {id: "22", title: "Why was the Quran Revealed in Arabic?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-17/347381814-44100-2-7ccd53ec818ef.m4a"},
            {id: "21", title: "Can I Pray However I Want?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-11/346563815-44100-2-dbe146588121b.m4a"},
            {id: "20", title: "Friday Prayer: Truth vs Illusion", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-1/345320563-44100-2-2c5bddde79623.m4a"},
            {id: "19", title: "Why Enlightened Ideas Spread?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-1/345320099-44100-2-25697b82d90ac.m4a"},
            {id: "18", title: "Alcohol: Prohibition vs Avoidance", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-1/345318401-44100-2-4f0cfba8d4f71.m4a"},
            {id: "17", title: "Foods: Fish and Liver", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-1/345317816-44100-2-a9c1100332161.m4a"},
            {id: "16", title: "Marriage of a Muslim Woman to a Non-Muslim", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-1/345317270-44100-2-442dd51f28c4f.m4a"},
            {id: "15", title: "The Concept of 'Wadribuhunn'", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-1/345316317-44100-2-7d9f3db2742d7.m4a"},
            {id: "14", title: "The Lie of the Prophet's Marriage to a Child", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-1/345316177-44100-2-c085280cba311.m4a"},
            {id: "13", title: "Why Did God Create Us?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-1/345316177-44100-2-c085280cba311.m4a"},
            {id: "12", title: "The Incident of Al-Ifk", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-1/345315951-44100-2-f9e569931af3b.m4a"},
            {id: "11", title: "Contradiction between Hadiths and Quran", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-8-1/345315421-44100-2-0492d2e4a286a.m4a"},
            {id: "10", title: "Al-Jarh wa al-Ta'dil", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-7-23/344201589-44100-2-928cd7afa617b.m4a"},
            {id: "9", title: "Women's Hijab", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-7-10/342643787-44100-2-69858796fc4c3.m4a"},
            {id: "8", title: "Milk al-Yamin", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-6-27/340895826-44100-2-cadc6035241f2.m4a"},
            {id: "7", title: "Was the Prophet Poor?", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-6-27/340895826-44100-2-cadc6035241f2.m4a"},
            {id: "6", title: "Difference between Nabi and Rasul", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-6-21/340080802-44100-2-f5e1bc473e858.m4a"},
            {id: "5", title: "Abrogation (Naskh)", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-5-10/334337459-44100-2-0defc0a3c56c7.m4a"},
            {id: "4", title: "Female Testimony", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-5-1/332854542-44100-2-502f331af81db.m4a"},
            {id: "3", title: "Concept of Jihad and Fighting", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-5-8/334123023-44100-2-b0f6a2cfb737c.m4a"},
            {id: "2", title: "Difference between Tadabbur and Tafaqquh", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-4-15/329694974-44100-2-dc82fef717a1f.m4a"},
            {id: "1", title: "Detailed Episode", audio: "https://d3ctxlq1ktw2nl.cloudfront.net/staging/2023-4-11/329048140-44100-2-57046444006aa.m4a"}
        ];

        const itemsPerPage = 40;
        let currentPage = 1;

        function renderPodcasts() {
            const grid = document.getElementById('podcastsGrid');
            grid.innerHTML = '';
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const paginatedItems = podcastList.slice(start, end);
            const favs = JSON.parse(localStorage.getItem("favorites")) || [];

            paginatedItems.forEach(p => {
                const isFav = favs.some(f => f.id === `podcast-${p.id}`);
                const card = document.createElement('div');
                card.className = 'podcast-card';
                card.id = `podcast-${p.id}`;
                card.dataset.audio = p.audio;
                card.innerHTML = `
                    <img src="/images/pod.jpg">
                    <h2>${p.title}</h2>
                    <a href="#" class="listen-link" onclick="playPod(event, this)"><i class="fas fa-play-circle"></i> Listen Now</a>
                    <div class="podcast-actions">
                        <button class="favorite-btn ${isFav ? 'active' : ''}" onclick="toggleFav(this, '${p.title}', 'podcast-${p.id}')"><i class="${isFav ? 'fas' : 'far'} fa-star"></i></button>
                    </div>
                `;
                grid.appendChild(card);
            });
            updatePaginationUI();
        }

        function updatePaginationUI() {
            const totalPages = Math.ceil(podcastList.length / itemsPerPage);
            document.getElementById('pageIndicator').textContent = `Page ${currentPage} of ${totalPages || 1}`;
            const startItem = podcastList.length === 0 ? 0 : ((currentPage - 1) * itemsPerPage) + 1;
            const endItem = Math.min(currentPage * itemsPerPage, podcastList.length);
            document.getElementById('totalCounter').textContent = `Showing ${startItem}-${endItem} of ${podcastList.length} episodes`;
            document.getElementById('prevPage').disabled = currentPage === 1;
            document.getElementById('firstPage').disabled = currentPage === 1;
            document.getElementById('nextPage').disabled = currentPage === totalPages || totalPages === 0;
            document.getElementById('lastPage').disabled = currentPage === totalPages || totalPages === 0;
        }

        function changePage(delta) { currentPage += delta; renderPodcasts(); scrollToTop(); }
        function goToPage(page) { currentPage = page; renderPodcasts(); scrollToTop(); }
        function goToLastPage() { currentPage = Math.ceil(podcastList.length / itemsPerPage) || 1; renderPodcasts(); scrollToTop(); }

        let currentAudio = null, isPlaying = false;

        function playPod(e, link) {
            e.preventDefault(); e.stopPropagation();
            const card = link.closest('.podcast-card');
            document.querySelectorAll('.podcast-card').forEach(c => c.classList.remove('active-podcast'));
            card.classList.add('active-podcast');
            document.getElementById('current-title').textContent = card.querySelector('h2').textContent;
            
            if (currentAudio) currentAudio.pause();
            currentAudio = new Audio(card.dataset.audio);
            currentAudio.addEventListener('timeupdate', updateProgress);
            currentAudio.addEventListener('loadedmetadata', () => { document.getElementById('duration').textContent = formatTime(currentAudio.duration); });
            currentAudio.addEventListener('ended', () => { document.querySelector('#playBtn i').className = 'fas fa-play'; isPlaying = false; });
            
            togglePlay();
            document.querySelector('.podcast-player').scrollIntoView({ behavior: 'smooth' });
        }

        function togglePlay() {
            if (!currentAudio) return;
            const i = document.querySelector('#playBtn i');
            if (isPlaying) { currentAudio.pause(); i.className = 'fas fa-play'; isPlaying = false; }
            else { currentAudio.play(); i.className = 'fas fa-pause'; isPlaying = true; }
        }

        function skipForward() { if (currentAudio) currentAudio.currentTime += 15; }
        function skipBackward() { if (currentAudio) currentAudio.currentTime -= 15; }
        function formatTime(s) { const m = Math.floor(s/60), sec = Math.floor(s%60); return `${m}:${sec<10?'0':''}${sec}`; }
        function updateProgress() { if (!currentAudio) return; const p = (currentAudio.currentTime / currentAudio.duration) * 100; document.getElementById('progressBar').style.width = p + '%'; document.getElementById('currentTime').textContent = formatTime(currentAudio.currentTime); }
        function setProgress(e) { if (!currentAudio) return; const rect = e.currentTarget.getBoundingClientRect(); const p = (e.clientX - rect.left) / rect.width; currentAudio.currentTime = p * currentAudio.duration; }
        function updateVolume(e) { if (currentAudio) currentAudio.volume = e.target.value / 100; }

        function toggleFav(btn, title, id) {
            let favs = JSON.parse(localStorage.getItem("favorites")) || [];
            const idx = favs.findIndex(f => f.id === id);
            if (idx === -1) { favs.push({id, title, type:'podcast'}); btn.classList.add('active'); btn.firstChild.className='fas fa-star'; showMsg("Added to Favorites"); }
            else { favs.splice(idx, 1); btn.classList.remove('active'); btn.firstChild.className='far fa-star'; showMsg("Removed from Favorites"); }
            localStorage.setItem("favorites", JSON.stringify(favs));
        }

        function showMsg(t) { const m = document.getElementById('message'); m.textContent = t; m.style.display = 'block'; setTimeout(() => m.style.display='none', 2000); }
        function scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); }
        function toggleMobileMenu() { const n = document.querySelector('.nav-links'), o = document.querySelector('.nav-overlay'); n.classList.toggle('show'); o.style.display = n.classList.contains('show') ? 'block' : 'none'; document.body.classList.toggle('no-scroll'); }

        // Original Global Search Logic
        let cachedPagesContent = null;
        let isSearchInitialized = false;
        async function loadAllPagesContent() {
            if (cachedPagesContent) return cachedPagesContent;
            try {
                const response = await fetch('/site-map.json?v=' + new Date().getTime());
                const pagesList = await response.json();
                const promises = pagesList.map(async (item) => {
                    let url = typeof item === 'string' ? item : item.url;
                    try {
                        const pageResp = await fetch(url);
                        const html = await pageResp.text();
                        const doc = new DOMParser().parseFromString(html, 'text/html');
                        doc.querySelectorAll('script, style, nav, footer, .no-search').forEach(el => el.remove());
                        return { page: doc.title.replace('Hussein Al-Khalil - ', '').trim() || 'Page', url: url, content: (doc.querySelector('.container, main, body') || doc.body).textContent.replace(/\s+/g, ' ').trim() };
                    } catch (e) { return null; }
                });
                cachedPagesContent = (await Promise.all(promises)).filter(Boolean);
                return cachedPagesContent;
            } catch (error) { return []; }
        }

        async function performGlobalSearch(query) {
            const resultsContainer = document.getElementById('searchResults');
            if (!query || query.length < 2) { resultsContainer.style.display = 'none'; return; }
            resultsContainer.innerHTML = '<div class="search-item"><p>Searching...</p></div>';
            resultsContainer.style.display = 'block';
            const data = await loadAllPagesContent();
            const results = data.filter(item => item.page.toLowerCase().includes(query.toLowerCase()) || item.content.toLowerCase().includes(query.toLowerCase()));
            resultsContainer.innerHTML = `<div class="search-count">Found ${results.length} results</div>`;
            results.forEach(item => {
                const div = document.createElement('div');
                div.className = 'search-item';
                div.innerHTML = `<h3>${item.page}</h3><p>${item.content.substring(0, 150)}...</p>`;
                div.onclick = () => window.location.href = item.url;
                resultsContainer.appendChild(div);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderPodcasts();
            const sInput = document.getElementById('globalSearch');
            if(sInput) {
                let timer;
                sInput.addEventListener('input', (e) => { clearTimeout(timer); timer = setTimeout(() => performGlobalSearch(e.target.value.trim()), 500); });
                sInput.addEventListener('focus', () => { if(!isSearchInitialized) { loadAllPagesContent(); isSearchInitialized = true; } });
            }
            document.addEventListener('click', (e) => { if(!document.querySelector('.universal-search').contains(e.target)) document.getElementById('searchResults').style.display = 'none'; });
            window.addEventListener('scroll', () => document.querySelector('.back-to-top').classList.toggle('visible', window.scrollY > 500));
        });
    </script>
</body>
</html>
