<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>المقالات | بني إسرائيل.</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4459876088599546" crossorigin="anonymous"></script>
    <style>
        /* جميع أنماط CSS الأصلية تبقى كما هي */
        /* ... */
    </style>
</head>
<body>
    <!-- الشريط العلوي المحسّن -->
    <header class="header" id="header">
        <!-- ... -->
    </header>
    
    <!-- أزرار التحكم بحجم الخط -->
    <div class="font-controls">
        <button id="fontDecrease" title="تصغير الخط (Zoom Out)">
            <i class="fas fa-search-minus"></i>
        </button>
        <button id="fontReset" title="الحجم الطبيعي (Reset)">
            <i class="fas fa-font"></i>
        </button>
        <button id="fontIncrease" title="تكبير الخط (Zoom In)">
            <i class="fas fa-search-plus"></i>
        </button>
    </div>
    
    <div class="container">
        <div class="article-card">
            <!-- ... -->
        </div>
    </div>

    <!-- الفوتر -->
    <footer>
        <!-- ... -->
    </footer>

    <!-- زر العودة إلى الأعلى -->
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>

    <script>
        // ================ حل مشكلة أزرار التحكم بالخط ================
        // تعريف المتغيرات في النطاق العام
        const fontDecrease = document.getElementById('fontDecrease');
        const fontReset = document.getElementById('fontReset');
        const fontIncrease = document.getElementById('fontIncrease');
        const articleContent = document.querySelector('.article-content');
        const publishDate = document.querySelector('.publish-date');
        
        // متغيرات لتخزين الحجم الأصلي
        let originalFontSize;
        let originalDateSize;
        
        // متغير للتحكم في مقياس التكبير/التصغير
        let currentScale = 1;
        const minScale = 0.5; // الحد الأدنى للتكبير
        const maxScale = 4;   // الحد الأقصى للتكبير
        
        // تطبيق تغيير حجم الخط
        function applyFontScale() {
            if (articleContent) {
                articleContent.style.fontSize = (originalFontSize * currentScale) + 'px';
            }
            if (publishDate) {
                publishDate.style.fontSize = (originalDateSize * currentScale) + 'px';
            }
        }
        
        // تصغير الخط
        fontDecrease.addEventListener('click', () => {
            currentScale = Math.max(minScale, currentScale / 1.2);
            applyFontScale();
        });
        
        // تكبير الخط
        fontIncrease.addEventListener('click', () => {
            currentScale = Math.min(maxScale, currentScale * 1.2);
            applyFontScale();
        });
        
        // إعادة تعيين حجم الخط إلى الحجم الأصلي
        fontReset.addEventListener('click', () => {
            currentScale = 1;
            applyFontScale();
        });
        
        // تهيئة الأحجام الأصلية عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', () => {
            // الحصول على الحجم الأصلي لمحتوى المقالة
            if (articleContent) {
                const computedStyle = getComputedStyle(articleContent);
                originalFontSize = parseFloat(computedStyle.fontSize);
            }
            
            // الحصول على الحجم الأصلي لتاريخ النشر
            if (publishDate) {
                const dateComputedStyle = getComputedStyle(publishDate);
                originalDateSize = parseFloat(dateComputedStyle.fontSize);
            }
            
            // تطبيق الموضع المحدد في متغيرات CSS
            const rootStyles = getComputedStyle(document.documentElement);
            const varFontControlTop = rootStyles.getPropertyValue('--font-control-top');
            const varFontControlBottom = rootStyles.getPropertyValue('--font-control-bottom');
            const varFontControlRight = rootStyles.getPropertyValue('--font-control-right');
            const varFontControlLeft = rootStyles.getPropertyValue('--font-control-left');
            
            const controls = document.querySelector('.font-controls');
            if (controls) {
                controls.style.top = varFontControlTop;
                controls.style.bottom = varFontControlBottom;
                controls.style.right = varFontControlRight;
                controls.style.left = varFontControlLeft;
            }
        });
        
        // ================ بقية وظائف الصفحة ================
        // قائمة الجوال
        const hamburger = document.getElementById('hamburger');
        const mobileNav = document.getElementById('mobileNav');
        const header = document.getElementById('header');
        const navIndicator = document.getElementById('navIndicator');
        const navButtons = document.querySelectorAll('.nav-btn');
        const backToTop = document.getElementById('backToTop');
        
        // فتح/إغلاق القائمة
        function toggleMobileMenu(event) {
            if (event) event.stopPropagation();
            
            const isOpen = mobileNav.classList.contains('open');
            mobileNav.classList.toggle('open');
            document.body.classList.toggle('menu-open', !isOpen);
            
            // تحديث أيقونة القائمة
            hamburger.innerHTML = isOpen ? 
                '<i class="fas fa-bars"></i>' : '<i class="fas fa-times"></i>';
        }
        
        // إغلاق القائمة عند النقر في أي مكان
        function closeMobileMenu(event) {
            if (mobileNav.classList.contains('open') && 
                !mobileNav.contains(event.target) && 
                !hamburger.contains(event.target)) {
                toggleMobileMenu();
            }
        }
        
        // تعيين المستمعين للأحداث
        hamburger.addEventListener('click', toggleMobileMenu);
        document.addEventListener('click', closeMobileMenu);
        
        // إغلاق القائمة عند النقر على أي رابط داخلي
        mobileNav.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                toggleMobileMenu();
            });
        });
        
        // تأثير التمرير على الشريط العلوي
        window.addEventListener('scroll', () => {
            if (window.scrollY > 20) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
            
            // التحكم في ظهور زر العودة للأعلى
            if (window.scrollY > 500) {
                backToTop.classList.add('show');
            } else {
                backToTop.classList.remove('show');
            }
        });
        
        // تحديث مؤشر التنقل
        function updateNavIndicator(button) {
            if (!button) return;
            
            const buttonRect = button.getBoundingClientRect();
            const headerRect = header.getBoundingClientRect();
            
            navIndicator.style.width = `${buttonRect.width}px`;
            navIndicator.style.left = `${buttonRect.left - headerRect.left}px`;
            navIndicator.style.opacity = '1';
        }
        
        // إخفاء مؤشر التنقل
        function hideNavIndicator() {
            navIndicator.style.opacity = '0';
        }
        
        // تعيين الأحداث لأزرار التنقل
        navButtons.forEach(button => {
            button.addEventListener('mouseenter', () => {
                updateNavIndicator(button);
            });
            
            button.addEventListener('mouseleave', () => {
                hideNavIndicator();
            });
        });
        
        // إخفاء المؤشر عند تحريك الماوس خارج منطقة الأزرار
        const navButtonsContainer = document.querySelector('.nav-buttons');
        if (navButtonsContainer) {
            navButtonsContainer.addEventListener('mouseleave', hideNavIndicator);
        }
        
        // قائمة المشاركة
        function toggleShareMenu() {
            const shareMenu = document.getElementById('shareMenu');
            const isOpen = shareMenu.style.display === 'block';
            
            if (isOpen) {
                shareMenu.classList.add('share-menu-closing');
                setTimeout(() => {
                    shareMenu.style.display = 'none';
                    shareMenu.classList.remove('share-menu-closing');
                }, 200);
            } else {
                shareMenu.style.display = 'block';
            }
            
            // إغلاق القائمة عند النقر خارجها
            if (shareMenu.style.display === 'block') {
                setTimeout(() => {
                    document.addEventListener('click', closeShareMenuOutside);
                }, 10);
            } else {
                document.removeEventListener('click', closeShareMenuOutside);
            }
        }
        
        function closeShareMenuOutside(e) {
            const shareMenu = document.getElementById('shareMenu');
            const shareButton = document.querySelector('.share-button-container button');
            
            if (!shareMenu.contains(e.target) && e.target !== shareButton) {
                toggleShareMenu();
            }
        }
        
        function copyArticleLink() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                alert('تم نسخ رابط المقالة بنجاح');
                toggleShareMenu();
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }
        
        function shareOnSocial(platform) {
            const url = encodeURIComponent(window.location.href);
            const title = encodeURIComponent(document.title);
            
            let shareUrl = '';
            switch(platform) {
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${title}&url=${url}`;
                    break;
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${title} ${url}`;
                    break;
                case 'telegram':
                    shareUrl = `https://t.me/share/url?url=${url}&text=${title}`;
                    break;
            }
            
            window.open(shareUrl, '_blank', 'width=600,height=400');
            toggleShareMenu();
        }
        
        // إغلاق قائمة المشاركة عند التمرير
        window.addEventListener('scroll', () => {
            const shareMenu = document.getElementById('shareMenu');
            if (shareMenu && shareMenu.style.display === 'block') {
                toggleShareMenu();
            }
        });
        
        // وظيفة زر العودة للأعلى
        backToTop.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // إخفاء مؤشر التمرير عند الوصول للأسفل في القائمة المنسدلة
        mobileNav.addEventListener('scroll', () => {
            const scrollIndicator = document.querySelector('.scroll-indicator');
            const scrollPosition = mobileNav.scrollTop + mobileNav.clientHeight;
            const scrollHeight = mobileNav.scrollHeight;
            
            // إخفاء المؤشر عند الوصول إلى أسفل القائمة
            if (scrollPosition >= scrollHeight - 20) {
                scrollIndicator.style.opacity = '0';
            } else {
                scrollIndicator.style.opacity = '1';
            }
        });
    </script>
</body>
</html>
