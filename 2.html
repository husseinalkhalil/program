<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
    <title>الروايات - روايات أساءت للنبي</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4459876088599546" crossorigin="anonymous"></script>
    
    <!-- Favicon -->
    <link href="images/logo-small.png" rel="icon" type="image/png"/>
    <link href="images/logo-small.png" rel="apple-touch-icon"/>

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary-color: #5e2ca5;
            --primary-dark: #451b7a; 
            --primary-light: #8a5bc7;
            --accent-color: #ffd700;
            --bg-color: #f9f7f2;
            --surface-color: #F8F5FD; 
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --shadow-sm: 0 4px 15px rgba(94, 44, 165, 0.08);
            --shadow-md: 0 8px 20px rgba(94, 44, 165, 0.12);
            --shadow-lg: 0 15px 30px rgba(0,0,0,0.1);
            --radius-lg: 1rem;
            --radius-xl: 1.5rem;
            --number-border: #8E13BB; 
            --matte-purple: #7c5295; 
            --reading-beige: #FCF9F1; 
            --btt-bg: #8E13BB;
            --btt-accent: #FFC600;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            width: 100%;
        }

        body.no-scroll {
            overflow: hidden !important;
            height: 100vh;
            position: fixed;
            width: 100%;
        }

        a { text-decoration: none; color: inherit; transition: all 0.3s ease; }

        /* ==================== Navigation ==================== */
        .nav-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(4px);
            z-index: 998; display: none;
        }

        nav {
            background: rgba(94, 44, 165, 0.98);
            backdrop-filter: blur(10px);
            padding: 0 5%;
            position: fixed;
            width: 100%; top: 0; z-index: 1000;
            display: flex; align-items: center; justify-content: space-between;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            height: 75px;
        }

        .logo-container { order: 1; } 
        .logo-container img { 
            height: 45px; 
            width: auto; 
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), filter 0.4s ease;
        }

        .nav-links {
            display: flex; flex: 1; justify-content: space-evenly; align-items: center; margin: 0 10px; order: 2;
        }

        .nav-links a {
            color: white; font-weight: 700; font-size: 0.95rem; padding: 8px 12px; border-radius: 20px; white-space: nowrap;
            display: flex; align-items: center; gap: 5px;
        }

        .nav-links a:hover, .nav-links a.active { background: rgba(255,255,255,0.15); transform: translateY(-2px); }

        .hamburger { display: none; color: white; font-size: 1.5rem; cursor: pointer; order: 3; }

        @media (max-width: 1200px) {
            .hamburger { display: block; order: 1; }
            .logo-container { order: 2; }
            .nav-links {
                position: fixed; top: 75px; right: -280px; width: 280px;
                background: var(--surface-color);
                flex-direction: column; padding: 20px; height: calc(100vh - 75px);
                box-shadow: -5px 0 15px rgba(0,0,0,0.1); transition: right 0.3s ease;
                overflow-y: auto; flex-wrap: nowrap; justify-content: flex-start;
                gap: 10px; margin: 0; flex: unset; z-index: 1000;
                order: unset; transform: none; display: flex !important;
            }
            .nav-links.show { right: 0; }
            .nav-links a { 
                color: var(--text-primary); width: 100%; padding: 12px; 
                border-radius: 8px; font-size: 1rem; justify-content: flex-start; 
                border-bottom: 1px solid rgba(0,0,0,0.03);
            }
            .nav-links a:hover { background: rgba(94, 44, 165, 0.05); color: var(--primary-color); transform: none; }
        }

        /* ==================== Back to Top Button ==================== */
        .back-to-top {
            position: fixed; bottom: 30px; right: 30px; width: 50px; height: 50px;
            background-color: var(--btt-bg); border: 3px solid var(--btt-accent);
            color: var(--btt-accent); border-radius: 50%; display: flex;
            align-items: center; justify-content: center; font-size: 1.2rem;
            cursor: pointer; z-index: 1001; transition: all 0.4s ease;
            opacity: 0; visibility: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .back-to-top.show { opacity: 1; visibility: visible; }
        .back-to-top:hover { transform: translateY(-5px) scale(1.05); background-color: var(--primary-dark); }

        /* ==================== Font Controls ==================== */
        .font-controls-fixed { position: fixed; top: 120px; left: 30px; display: flex; flex-direction: column; gap: 10px; z-index: 990; }
        .font-btn { width: 45px; height: 45px; border-radius: 50%; background: white; border: 1px solid #e2e8f0; color: var(--primary-color); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; box-shadow: var(--shadow-sm); transition: 0.3s; }
        .font-btn:hover { background: var(--primary-color); color: white; transform: scale(1.1); }

        /* ==================== Header & Search ==================== */
        .unified-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            padding: 100px 0 40px; border-radius: 0 0 50px 50px; margin-bottom: 30px;
            width: 100%; text-align: center; color: white; position: relative; z-index: 1;
        }
        .page-title { font-size: 2.2rem; font-weight: 800; margin-bottom: 10px; }
        .page-subtitle { color: #e2e8f0; font-size: 1.1rem; max-width: 800px; margin: 0 auto; padding: 0 20px; }

        .universal-search { width: 100%; max-width: 600px; margin: 35px auto 0; position: relative; z-index: 5; }
        #globalSearch { 
            width: 100%; padding: 18px 25px; border-radius: 50px; border: none; font-size: 1rem; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); outline: none; text-align: right;
            font-family: 'Tajawal', sans-serif;
        }
        .search-results {
            position: absolute; top: 110%; left: 0; right: 0; 
            background: white; border-radius: 15px; max-height: 400px; 
            overflow-y: auto; display: none; z-index: 1002; color: #333; 
            text-align: right; box-shadow: var(--shadow-lg); border: 1px solid rgba(0,0,0,0.05);
        }
        .search-item { padding: 15px 20px; border-bottom: 1px solid rgba(0,0,0,0.05); cursor: pointer; transition: background 0.2s; }
        .search-item:hover { background: rgba(94, 44, 165, 0.05); }
        mark { background-color: #ffd700; color: #000; padding: 0 2px; border-radius: 2px; }

        /* ==================== Hadith Card Styling ==================== */
        .container { max-width: 1150px; margin: 0 auto; padding: 0 20px; width: 100%; }
        .hadith-row { display: flex; align-items: flex-start; gap: 20px; margin-bottom: 30px; width: 100%; transition: all 0.3s ease; }
        
        .hadith-number-circle { 
            width: 46px; height: 46px; background-color: #FFC600; border: 2.5px solid #8E13BB; 
            color: #8E13BB; border-radius: 50%; display: flex; align-items: center; justify-content: center; 
            font-weight: 800; font-size: 1.3rem; flex-shrink: 0; box-shadow: 0 4px 8px rgba(0,0,0,0.1); 
            margin-top: 15px; padding-top: 4px; z-index: 5;
        }
        
        .hadith-card { 
            background: var(--surface-color); border-radius: var(--radius-xl); 
            box-shadow: var(--shadow-sm); border-right: 6px solid var(--primary-color); 
            overflow: hidden; transition: 0.3s; flex: 1; border: 1px solid rgba(0,0,0,0.05);
            position: relative; 
        }
        
        .hadith-summary { padding: 25px 25px 25px 45px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; gap: 15px; }
        .hadith-summary h3 { font-size: 1.3rem; color: var(--primary-dark); font-weight: 800; flex: 1; text-align: right; transition: all 0.3s ease; }
        .hadith-summary:hover h3 { color: #7c3aed; transform: translateX(-5px); }
        .source-tag { background: #FFC600; padding: 5px 12px; border-radius: 8px; font-size: 0.85rem; font-weight: 800; color: var(--primary-color); }
        
        .fav-header-icon { 
            font-size: 1.6rem; color: var(--matte-purple); transition: all 0.3s ease; cursor: pointer; 
            position: absolute; top: 0; left: 0; padding: 10px 15px; z-index: 10;
        }
        .fav-header-icon:hover { transform: scale(1.15); color: var(--primary-color); }
        .fav-header-icon.active { color: var(--primary-color); }

        .hadith-details { 
            max-height: 0; opacity: 0; overflow: hidden; 
            transition: max-height 0.7s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease-in-out; 
            background: var(--reading-beige); 
        }
        .hadith-details.open { max-height: 2000px; opacity: 1; padding: 10px 30px 40px; border-top: 1px solid rgba(0,0,0,0.05); }

        .detail-section { margin-top: 25px; background: transparent; border: none; }
        .section-header { 
            padding-bottom: 8px; margin-bottom: 10px; font-weight: 800; font-size: 1.1rem; 
            display: flex; align-items: center; gap: 10px; color: var(--primary-dark);
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        .section-content { padding: 5px 0; line-height: 1.8; font-size: 1.15rem; color: #334155; }

        .hadith-actions { display: flex; align-items: center; gap: 15px; margin-top: 25px; padding-top: 20px; border-top: 1px dashed rgba(0,0,0,0.08); }
        .action-btn { font-size: 0.9rem; font-weight: 700; padding: 10px 18px; border-radius: 8px; display: flex; align-items: center; gap: 8px; transition: 0.3s; cursor: pointer; text-decoration: none !important; }
        .btn-source { background: rgba(94, 44, 165, 0.1); color: var(--primary-color); border: 1px solid rgba(94, 44, 165, 0.2); }
        .btn-source:hover { background: var(--primary-color); color: white; }
        .btn-report { background: rgba(225, 29, 72, 0.08); color: #e11d48; border: 1px solid rgba(225, 29, 72, 0.1); }
        .btn-report:hover { background: #e11d48; color: white; }

        /* ==================== Pagination ==================== */
        #pagination-wrapper { background: var(--surface-color); padding: 25px; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); text-align: center; margin: 40px auto; border: 1px solid rgba(0,0,0,0.05); max-width: 500px; }
        .pagination-btn { background: #f1f5f9; color: var(--text-primary); border: none; padding: 10px 20px; border-radius: 12px; cursor: pointer; margin: 0 5px; font-family: 'Tajawal'; font-weight: 600; transition: 0.3s; }
        .pagination-btn:hover { background: var(--primary-color); color: white; transform: translateY(-2px); }
        .pagination-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; background: #e2e8f0; color: #94a3b8; }

        /* ==================== Social Media (Original Style) ==================== */
        .social-section { text-align: center; margin-bottom: 60px; background: var(--surface-color); padding: 40px; border-radius: var(--radius-xl); box-shadow: var(--shadow-sm); margin-top: 50px; }
        .social-grid { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-top: 30px; }
        .social-btn { width: 55px; height: 55px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: white; transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .social-btn img { width: 26px; transition: 0.3s; }
        .social-btn:hover { transform: translateY(-8px) scale(1.1); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        .social-btn:hover img { filter: brightness(0) invert(1); }
        .social-yt:hover { background: #FF0000; } 
        .social-fb:hover { background: #1877F2; } 
        .social-ins:hover { background: #E4405F; } 
        .social-tg:hover { background: #0088CC; } 
        .social-tk:hover { background: #000000; } 
        .social-sc:hover { background: #FFFC00; }

        /* ==================== Footer (Original Style) ==================== */
        footer { background: #1e293b; color: white; padding: 60px 20px; text-align: center; width: 100%; margin-top: 50px; }
        .footer-links { display: flex; justify-content: center; gap: 12px; margin-bottom: 25px; flex-wrap: wrap; align-items: center; }
        .footer-links a { color: #cbd5e1; font-weight: 500; font-size: 0.95rem; text-decoration: none; transition: color 0.3s ease; }
        .footer-links a:hover { color: var(--accent-color); }
        .footer-divider { color: #475569; font-size: 0.8rem; user-select: none; } 
        .copyright { color: #64748b; font-size: 0.85rem; border-top: 1px solid #334155; padding-top: 25px; margin-top: 25px; }

        /* ==================== Responsive ==================== */
        @media (max-width: 768px) {
            .unified-header { padding: 90px 15px 40px; border-radius: 0 0 35px 35px; }
            .page-title { font-size: 1.7rem; }
            .hadith-row { flex-direction: row; align-items: flex-start; gap: 10px; }
            .hadith-row.is-open { flex-direction: column; }
            .hadith-row.is-open .hadith-number-circle { margin-top: 0; margin-bottom: 5px; align-self: flex-start; }
            .hadith-number-circle { width: 38px; height: 38px; font-size: 1rem; margin-top: 25px; }
            .hadith-card { width: 100%; }
            .hadith-details.open { padding: 15px 15px 30px; }
            .font-controls-fixed { left: 15px; top: auto; bottom: 20px; flex-direction: row; }
            .back-to-top { bottom: 80px; right: 20px; width: 45px; height: 45px; }
        }

        /* ==================== Report Modal & Toast ==================== */
        .report-modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(5px); display: none; align-items: center; justify-content: center; z-index: 2000; padding: 20px; }
        .report-modal.show { display: flex; }
        .modal-box { background: white; width: 100%; max-width: 420px; border-radius: 20px; padding: 30px; box-shadow: var(--shadow-lg); animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .report-option { display: flex; align-items: center; gap: 12px; padding: 14px 18px; border: 1px solid #e2e8f0; border-radius: 12px; margin-bottom: 12px; cursor: pointer; }
        .btn-send { flex: 2; background: var(--primary-color); color: white; border: none; padding: 14px; border-radius: 12px; font-family: 'Tajawal'; font-weight: 700; cursor: pointer; }
        .btn-cancel { flex: 1; background: #f1f5f9; color: #475569; border: none; padding: 14px; border-radius: 12px; font-family: 'Tajawal'; cursor: pointer; }
        .success-toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: #059669; color: white; padding: 14px 35px; border-radius: 50px; font-weight: 700; box-shadow: 0 10px 25px rgba(0,0,0,0.2); z-index: 3000; transition: 0.5s; opacity: 0; display: flex; align-items: center; gap: 12px; }
        .success-toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
    </style>
</head>
<body>

<div class="nav-overlay" id="navOverlay" onclick="toggleMobileMenu()"></div>

<nav>
    <div class="logo-container"><a href="index.html"><img src="images/logo.png" alt="logo" /></a></div>
    <div class="nav-links" id="navLinks">
        <a href="index.html">الرئيسية</a>
        <a href="books.html">الكتب</a>
        <a href="articles.html">المقالات</a>
        <a href="hadith.html" class="active">الروايات</a>
        <a href="khawatir.html">خواطر</a>
        <a href="videos.html">الفيديوهات</a>
        <a href="history.html">التاريخ</a>
        <a href="podcast.html">البودكاست</a>
        <a href="ask.html">الأسئلة</a>
        <a href="hewar.html">حوارات</a>
        <a href="inq.html">تساؤلات</a>
        <a href="manhaj.html">المنهج</a>
        <a href="favorites.html">المفضلة</a>
        <a href="support.html">دعم المحتوى</a>
        <a href="about.html">من نحن</a>
    </div>
    <div class="hamburger" onclick="toggleMobileMenu()"><i class="fas fa-bars"></i></div>
</nav>

<div class="font-controls-fixed">
    <button class="font-btn" id="fontIncrease" title="تكبير"><i class="fas fa-plus"></i></button>
    <button class="font-btn" id="fontReset" title="إعادة"><i class="fas fa-redo"></i></button>
    <button class="font-btn" id="fontDecrease" title="تصغير"><i class="fas fa-minus"></i></button>
</div>

<button class="back-to-top" id="backToTop" title="العودة للأعلى"><i class="fas fa-chevron-up"></i></button>

<header class="unified-header">
    <h1 class="page-title">روايات أساءت للمقام النبوي</h1>
    <p class="page-subtitle">فحص نقدي للمرويات التي تعارضت مع الكمال والعصمة النبوية</p>
    
    <div class="universal-search">
        <input type="text" id="globalSearch" placeholder="ابحث في جميع المحتويات..." />
        <div class="search-results" id="searchResults"></div>
    </div>
</header>

<div class="container">
    <div id="hadithContainer">
        <!-- الرواية 1 -->
        <div class="hadith-row">
            <div class="hadith-number-circle">1</div>
            <div class="hadith-card" id="card-h1">
                <i class="far fa-bookmark fav-header-icon" title="أضف للمفضلة" onclick="toggleFavorite(event, 'h1')"></i>
                <div class="hadith-summary" onclick="toggleHadith(this)">
                    <h3>قتل المرتد</h3>
                    <div style="display:flex; align-items:center; gap:12px;">
                        <span class="source-tag">البخاري</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                </div>
                <div class="hadith-details">
                    <div class="detail-section">
                        <div class="section-header"><i class="fas fa-quote-right"></i> نص الرواية</div>
        <div class="section-content">قالَ النَّبيُّ صَلَّى اللهُ عليه وسلَّمَ: مَن بَدَّلَ دِينَهُ فَاقْتُلُوهُ.</div>
        <!-- رقم الرواية بخط عريض وحجم أصلي -->
        <div class="section-content"><b style="font-weight: bold;">رقم الرواية: 3017</b></div>
        <div class="hadith-actions">
            <a href="https://dorar.net/h/77qg1XUt" target="_blank" class="action-btn btn-source"><i class="fas fa-external-link-alt"></i> مصدر الرواية</a>
            <div class="action-btn btn-report" onclick="openReportModal('رواية قتل المرتد', '1')"><i class="fas fa-flag"></i> إبلاغ</div>
        </div>
    </div>
    <div class="detail-section">
        <div class="section-header"><i class="fas fa-exclamation-triangle"></i> وجه التناقض</div>
        <div class="section-content">تفرض هذه الرواية عقوبة الإعدام على "حرية الاعتقاد"، مما يحول الدين من قناعة قلبية ويقين عقلي إلى "انتماء إجباري" يُحرس بالسيف. هذا التوجه يتصادم مع روح الرسالة المحمدية التي جاءت لتحرير عقول الناس، وليس لإجبارهم على البقاء في الدين كرهًا. فالإيمان تحت تهديد السيف لا ينتج مؤمنين، بل ينتج منافقين، والقرآن لم يشرّع أي عقوبة دنيوية على مجرد تغيير الدين، بل ترك الحساب فيه للخالق يوم القيامة، معتبراً أن اختيار الإنسان لدينه هو أخص خصوصياته التي سيُسأل عنها وحده.</div>
    </div>
    <div class="detail-section">
        <div class="section-header"><i class="fas fa-balance-scale"></i> الميزان (الرد القرآني)</div>
        
        <div class="section-content">
            <b style="font-weight: bold;">القاعدة الذهبية:</b> قال تعالى: {لَا إِكْرَاهَ فِي الدِّينِ قَد تَّبَيَّنَ الرُّشْدُ مِنَ الْغَيِّ} <span style="font-size: 12px; color: #28a745;">[البقرة: 256]</span>. وهي آية محكمة وقطعية الدلالة تنفي أي صورة من صور الإكراه في الدخول أو البقاء في الدين.
        </div>
        
        <div class="section-content">
            <b style="font-weight: bold;">الاختيار الفردي:</b> قال تعالى: {وَقُلِ الْحَقُّ مِن رَّبِّكُمْ فَمَن شَاءَ فَلْيُؤْمِن وَمَن شَاءَ فَلْيَكْفُرْ} <span style="font-size: 12px; color: #28a745;">[الكهف: 29]</span>. هنا إقرار صريح بحرية المشيئة الإنسانية في الإيمان أو الكفر.
        </div>
        
        <div class="section-content">
            <b style="font-weight: bold;">نهي النبي عن الإكراه:</b> قال تعالى مخاطباً نبيه: {أَفَأَنتَ تُكْرِهُ النَّاسَ حَتَّىٰ يَكُونُوا مُؤْمِنِينَ} <span style="font-size: 12px; color: #28a745;">[يونس: 99]</span>. وهذا استفهام استنكاري يوضح أن مهمة النبي هي البلاغ فقط وليس الإجبار.
        </div>
        
        <div class="section-content">
            <b style="font-weight: bold;">غياب العقوبة:</b> ذكر القرآن "الارتداد" في عدة آيات ولم يضع لها حداً دنيوياً، بل توعد بالعقاب الأخروي، كقوله تعالى: {وَمَن يَرْتَدِدْ مِنكُمْ عَن دِينِهِ فَيَمُتْ وَهُوَ كَافِرٌ فَأُولَٰئِكَ حَبِطَتْ أَعْمَالُهُمْ فِي الدُّنْيَا وَالْآخِرَةِ} <span style="font-size: 12px; color: #28a745;">[البقرة: 217]</span>. ولو كان القتل حداً ثابتاً لذُكر في هذه الآيات التي فصلت عاقبة المرتد.
        </div></div>
                </div>
            </div>
        </div>

        <!-- الرواية 2 -->
        <div class="hadith-row">
            <div class="hadith-number-circle">2</div>
            <div class="hadith-card" id="card-h2">
                <i class="far fa-bookmark fav-header-icon" title="أضف للمفضلة" onclick="toggleFavorite(event, 'h2')"></i>
                <div class="hadith-summary" onclick="toggleHadith(this)">
                    <h3>رواية محاولة الانتحار (التردي من الجبال)</h3>
                    <div style="display:flex; align-items:center; gap:12px;">
                        <span class="source-tag">البخاري</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                </div>
                <div class="hadith-details">
                    <div class="detail-section">
                        <div class="section-header"><i class="fas fa-quote-right"></i> نص الرواية</div>
                        <div class="section-content">"... حزن النبي ﷺ حزناً غدا منه مراراً كي يتردى من رءوس شواهق الجبال..."</div>
                        <div class="hadith-actions">
                            <a href="https://dorar.net/h/7XW2L8M8" target="_blank" class="action-btn btn-source"><i class="fas fa-external-link-alt"></i> مصدر الرواية</a>
                            <div class="action-btn btn-report" onclick="openReportModal('رواية محاولة الانتحار', '2')"><i class="fas fa-flag"></i> إبلاغ</div>
                        </div>
                    </div>
                    <div class="detail-section">
                        <div class="section-header"><i class="fas fa-exclamation-triangle"></i> وجه الإساءة</div>
                        <div class="section-content">نسبة اليأس والقنوط والاضطراب النفسي للنبي ﷺ لدرجة التفكير في إنهاء حياته.</div>
                    </div>
                    <div class="detail-section">
                        <div class="section-header"><i class="fas fa-balance-scale"></i> الميزان (الرد القرآني)</div>
                        <div class="section-content">قال تعالى: {مَا وَدَّعَكَ رَبُّكَ وَمَا قَلَىٰ} [الضحى]. إن تثبيت الله لقلب النبي وعصمته حقيقة قرآنية قطعية.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pagination -->
    <div id="pagination-wrapper">
        <span id="pageInfo">الصفحة 1 من 1</span>
        <div style="margin-top: 15px;">
            <button id="firstPage" class="pagination-btn">الأولى</button>
            <button id="prevPage" class="pagination-btn">السابق</button>
            <button id="nextPage" class="pagination-btn">التالي</button>
        </div>
    </div>

    <!-- قسم تابعنا (Original Section) -->
    <div class="social-section">
        <h2 style="font-weight: 800; color: var(--primary-dark); margin-bottom: 10px;">تابعنا على منصات التواصل</h2>
        <div class="social-grid">
            <a href="https://youtube.com/@husseinalkhalil" target="_blank" class="social-btn social-yt" title="يوتيوب"><img src="icons/yot-soc.png" alt="yt"></a>
            <a href="https://www.facebook.com/hussien.alkhalil" target="_blank" class="social-btn social-fb" title="فيسبوك"><img src="icons/fac-soc.png" alt="fb"></a>
            <a href="https://instagram.com/husseinalkhalil" target="_blank" class="social-btn social-ins" title="إنستغرام"><img src="icons/ins-soc.png" alt="in"></a>
            <a href="https://t.me/tanoeer" target="_blank" class="social-btn social-tg" title="تلغرام"><img src="icons/tel-soc.png" alt="tg"></a>
            <a href="https://tiktok.com/@h.alkhalil" target="_blank" class="social-btn social-tk" title="تيك توك"><img src="icons/tik-soc.png" alt="tk"></a>
            <a href="https://snapchat.com/t/sFLWjw3K" target="_blank" class="social-btn social-sc" title="سناب شات"><img src="icons/snap.png" alt="sc"></a>
        </div>
    </div>
</div>

<div class="report-modal" id="reportModal">
    <div class="modal-box">
        <h2>إبلاغ عن محتوى</h2>
        <p id="modalHadithInfo">أنت تبلغ عن: جاري التحديد...</p>
        <form name="hadith-reports" id="reportForm" method="POST" data-netlify="true">
            <input type="hidden" name="hadith_name" id="hiddenHadithName">
            <input type="hidden" name="hadith_number" id="hiddenHadithNumber">
            <label class="report-option"><input type="radio" name="issue_type" value="الرابط لا يعمل" required> <span>الرابط لا يعمل</span></label>
            <label class="report-option"><input type="radio" name="issue_type" value="الحديث غير مطابق"> <span>الحديث غير مطابق</span></label>
            <label class="report-option"><input type="radio" name="issue_type" value="رقم الحديث غير مطابق"> <span>رقم الحديث غير مطابق</span></label>
            <div class="modal-footer" style="display:flex; gap:10px; margin-top:20px;">
                <button type="submit" class="btn-send">إرسال البلاغ</button>
                <button type="button" class="btn-cancel" onclick="closeReportModal()">إلغاء</button>
            </div>
        </form>
    </div>
</div>

<div class="success-toast" id="successToast"><i class="fas fa-check-circle"></i> <span>شكراً لمساهمتك</span></div>

<footer>
    <div class="footer-links">
        <a href="terms.html">الشروط والأحكام</a> <span class="footer-divider">|</span>
        <a href="privacy.html">سياسة الخصوصية</a> <span class="footer-divider">|</span>
        <a href="contact.html">اتصل بنا</a> <span class="footer-divider">|</span>
        <a href="feedback.html">شاركنا رأيك</a>
    </div>
    <div class="copyright">حسين الخليل - جميع الحقوق محفوظة © 2025</div>
</footer>

<script>
    /* ==================== Back to Top ==================== */
    const btt = document.getElementById('backToTop');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 400) btt.classList.add('show');
        else btt.classList.remove('show');
    });
    btt.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

    /* ==================== Report Logic ==================== */
    document.getElementById("reportForm").addEventListener("submit", function(e) {
        e.preventDefault();
        const formData = new FormData(this);
        fetch("/", {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: new URLSearchParams(formData).toString(),
        }).then(() => {
            closeReportModal();
            const toast = document.getElementById("successToast");
            toast.classList.add("show");
            setTimeout(() => toast.classList.remove("show"), 3500);
            this.reset();
        });
    });

    /* ==================== Search Logic ==================== */
    let cachedPagesContent = null;
    let isSearchInitialized = false;

    async function loadAllPagesContent() {
        if (cachedPagesContent) return cachedPagesContent;
        try {
            const resp = await fetch('site-map.json?v=' + new Date().getTime());
            const list = await resp.json();
            const promises = list.map(async (item) => {
                let url = typeof item === 'string' ? item : item.url;
                try {
                    const pResp = await fetch(url);
                    const html = await pResp.text();
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    doc.querySelectorAll('script, style, nav, footer').forEach(el => el.remove());
                    return { page: doc.title.replace('حسين الخليل - ', '').trim(), url, content: doc.body.textContent.replace(/\s+/g, ' ').trim() };
                } catch (e) { return null; }
            });
            cachedPagesContent = (await Promise.all(promises)).filter(Boolean);
            return cachedPagesContent;
        } catch (e) { return []; }
    }

    async function performSearch(query) {
        const container = document.getElementById('searchResults');
        if (!query || query.length < 2) { container.style.display = 'none'; return; }
        container.innerHTML = '<div class="search-item">جاري البحث...</div>';
        container.style.display = 'block';
        const data = await loadAllPagesContent();
        const results = data.filter(i => i.page.includes(query) || i.content.includes(query));
        
        container.innerHTML = results.length ? '' : '<div class="search-item">لم يتم العثور على نتائج</div>';
        results.forEach(r => {
            const div = document.createElement('div');
            div.className = 'search-item';
            div.innerHTML = `<h3>${r.page}</h3><p>${r.content.substring(0, 100)}...</p>`;
            div.onclick = () => window.location.href = r.url;
            container.appendChild(div);
        });
    }

    /* ==================== UI Controls ==================== */
    function openReportModal(name, num) {
        document.getElementById('hiddenHadithName').value = name;
        document.getElementById('hiddenHadithNumber').value = num;
        document.getElementById('modalHadithInfo').textContent = `أنت تبلغ عن: ${name} (بطاقة رقم ${num})`;
        document.getElementById('reportModal').classList.add('show');
        document.body.classList.add('no-scroll');
    }
    function closeReportModal() {
        document.getElementById('reportModal').classList.remove('show');
        document.body.classList.remove('no-scroll');
    }
    function toggleHadith(el) {
        const details = el.nextElementSibling;
        const row = el.closest('.hadith-row');
        details.classList.toggle('open');
        row.classList.toggle('is-open');
        const icon = el.querySelector('.toggle-icon');
        if(icon) icon.style.transform = details.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
    }
    function toggleMobileMenu() {
        const links = document.getElementById('navLinks');
        const overlay = document.getElementById('navOverlay');
        links.classList.toggle('show');
        overlay.style.display = links.classList.contains('show') ? 'block' : 'none';
        document.body.classList.toggle('no-scroll', links.classList.contains('show'));
    }

    /* ==================== Pagination & Font ==================== */
    const perPage = 15; let current = 1;
    function paginate() {
        const rows = Array.from(document.querySelectorAll('.hadith-row'));
        const total = Math.ceil(rows.length / perPage);
        document.getElementById('pageInfo').textContent = `الصفحة ${current} من ${total}`;
        rows.forEach((r, i) => r.style.display = (i >= (current-1)*perPage && i < current*perPage) ? 'flex' : 'none');
        document.getElementById('prevPage').disabled = current === 1;
        document.getElementById('nextPage').disabled = current === total || total === 0;
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    document.getElementById('nextPage').onclick = () => { current++; paginate(); };
    document.getElementById('prevPage').onclick = () => { current--; paginate(); };
    document.getElementById('firstPage').onclick = () => { current = 1; paginate(); };

    let scale = 1;
    function updateScale() {
        document.querySelectorAll('.hadith-summary h3').forEach(e => e.style.fontSize = (1.3 * scale) + 'rem');
        document.querySelectorAll('.section-content').forEach(e => e.style.fontSize = (1.15 * scale) + 'rem');
    }
    document.getElementById('fontIncrease').onclick = () => { if(scale < 1.5) { scale += 0.1; updateScale(); } };
    document.getElementById('fontDecrease').onclick = () => { if(scale > 0.8) { scale -= 0.1; updateScale(); } };
    document.getElementById('fontReset').onclick = () => { scale = 1; updateScale(); };

    function toggleFavorite(e, id) {
        e.stopPropagation();
        const card = document.getElementById('card-' + id);
        const icon = card.querySelector('.fav-header-icon');
        let favs = JSON.parse(localStorage.getItem('myFavorites')) || [];
        const idx = favs.findIndex(f => f.id === id);
        if(idx > -1) {
            favs.splice(idx, 1);
            icon.classList.replace('fas', 'far');
        } else {
            favs.push({ id, title: card.querySelector('h3').textContent, type: 'رواية' });
            icon.classList.replace('far', 'fas');
        }
        localStorage.setItem('myFavorites', JSON.stringify(favs));
    }

    document.addEventListener('DOMContentLoaded', () => {
        paginate();
        const sInput = document.getElementById('globalSearch');
        if(sInput) {
            let timer;
            sInput.addEventListener('input', e => { clearTimeout(timer); timer = setTimeout(() => performSearch(e.target.value.trim()), 500); });
        }
    });
</script>
</body>
</html>
